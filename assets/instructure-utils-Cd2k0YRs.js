import{i as e,r as t,w as n}from"./react-BV2cBUoD.js";import{P as o}from"./modules-CNyw1_Ie.js";import{c as s}from"./instructure-ui-BKmH9FUF.js";const i=e=>!!e&&void 0!==e.ref,r=e=>!!e&&void 0!==e.current;function u(t){const n="function"==typeof t?t():t;if(n&&n===document)return document.documentElement;if(n instanceof Element||n===window||n&&void 0!==n.nodeType)return n;if(n){const t=n;if(i(t)){const e=r(t.ref)?t.ref.current:t.ref;return e instanceof HTMLElement?e:u(e)}return t.constructor.componentId?t.constructor.componentId:t.constructor.name,e.findDOMNode(n)}}function c(e,t,n,o){const s=e===window||e===document?e:u(e);return null==s||s.addEventListener(t,n,o),{remove(){null==s||s.removeEventListener(t,n,o)}}}const a=!("undefined"==typeof window||!window.document||!window.document.createElement),d="keyboard",l="pointer";let f=[],h=[],m=d,p=0;const w={},b=e=>{"html"!==e.target.nodeName.toLowerCase()&&(g(m,l),f.forEach((e=>e.remove())))},g=(e,t)=>{e!==t&&(m=t,Object.keys(w).forEach((n=>w[n](e,t))))},v=()=>{g(m,d)},y=()=>{g(m,l)},L=e=>{const t=e.onInputModeChange,n=p++;return"function"==typeof t&&(w[n]=t),a&&(0===h.length&&(h.push(c(document,"keydown",v,!0)),h.push(c(document,"mousedown",y,!0)),h.push(c(document,"pointerdown",y,!0)),h.push(c(document,"touchstart",y,!0))),0===f.length&&(f.push(c(document,"mousemove",b,!0)),f.push(c(document,"mousedown",b,!0)),f.push(c(document,"mouseup",b,!0)),f.push(c(document,"pointermove",b,!0)),f.push(c(document,"pointerdown",b,!0)),f.push(c(document,"pointerup",b,!0)),f.push(c(document,"touchmove",b,!0)),f.push(c(document,"touchstart",b,!0)),f.push(c(document,"touchend",b,!0)))),{isKeyboardMode:()=>m===d,remove:()=>{1===p&&(f.forEach((e=>e.remove())),f=[],h.forEach((e=>e.remove())),h=[]),delete w[n],p--}}};function F(e,t){let n=t;for(;n;){if(n===e)return!0;n=n.parentNode}return!1}const E=a?function(e,t){const n=e&&u(e),o=t&&u(t);return!(!n||!o)&&(n instanceof Window||o instanceof Window?F(n,o):n.contains(o))}:F;function M(e){const t=e&&u(e);let n;t&&"ownerDocument"in t&&(n=t.ownerDocument);const o=a?window.document:void 0;return n||o}function T(e){const t={top:0,bottom:0,left:0,right:0,height:0,width:0};if(!a)return t;const n=e&&u(e);if(!n)return t;if(n===window)return{left:window.pageXOffset,top:window.pageYOffset,width:window.innerWidth,height:window.innerHeight,right:window.innerWidth+window.pageXOffset,bottom:window.innerHeight+window.pageYOffset};const o=e===document?document:M(n),s=o&&o.documentElement;if(!s||!E(s,n))return t;const i=n.getBoundingClientRect();let r;for(r in t)t[r]=i[r];if(o!==document&&o.defaultView){const e=o.defaultView.frameElement;if(e){const n=T(e);t.top+=n.top,t.bottom+=n.top,t.left+=n.left,t.right+=n.left}}return{top:t.top+(window.pageYOffset||s.scrollTop)-(s.clientTop||0),left:t.left+(window.pageXOffset||s.scrollLeft)-(s.clientLeft||0),width:(null==t.width?n.offsetWidth:t.width)||0,height:(null==t.height?n.offsetHeight:t.height)||0,right:o.body.clientWidth-t.width-t.left,bottom:o.body.clientHeight-t.height-t.top}}const _=function(){let e;if(a&&window.requestAnimationFrame&&window.cancelAnimationFrame)e=e=>{const t=window.requestAnimationFrame(e);return{cancel:()=>window.cancelAnimationFrame(t)}};else{let t=(new Date).getTime();e=e=>{const n=(new Date).getTime(),o=Math.max(0,16-(n-t)),s=setTimeout(e,o);return t=n,{cancel:()=>clearTimeout(s)}}}return e}();function V(e,t){const n=u(e),o=[];let s=T(n)||{},i=!1;return function e(){if(!i){const i=T(n)||{};(i.top!==s.top||i.left!==s.left||i.right!==s.right||i.bottom!==s.bottom||i.width!==s.width||i.height!==s.height)&&"function"==typeof t&&t(i),s=i,o.push(_(e))}}(),{remove(){i=!0,o.forEach((e=>e.cancel()))}}}function N(e){const t=(e||document).activeElement;return t&&(n=t,Boolean(n.tagName.includes("-")&&customElements.get(n.tagName.toLowerCase())))?t.shadowRoot.activeElement:t;var n}function x(e){const t=e&&u(e),n=N();return!!t&&(n===t||E(t,n))}const A=["a[href]","frame","iframe","object","input:not([type=hidden])","select","textarea","button","*[tabindex]",'[contenteditable="true"]'].join(",");function C(e,t,n){const o=e&&u(e);if(!o||"function"!=typeof o.querySelectorAll)return[];let s=Array.from(o.querySelectorAll(A));return n&&o.matches(A)&&(s=[...s,o]),s.filter((e=>"function"==typeof t?t(e)&&O(e):O(e)))}function P(e){return"none"===I(e).display}function D(e){var t,n;const o=["fixed","absolute"];return!!o.includes(null===(t=e.style.position)||void 0===t?void 0:t.toLowerCase())||!!o.includes(null===(n=I(e).getPropertyValue("position"))||void 0===n?void 0:n.toLowerCase())}function O(e){return!e.disabled&&function(e){let t=e;for(;t&&t!==document.body&&!(t instanceof ShadowRoot);){if(P(t))return!1;if(D(t))break;t=t.parentNode}return!0}(e)}function S(e,t){return C(e,(e=>{return t=e.getAttribute("tabindex"),!(!isNaN(t)&&t<0);var t}),t)}const B={toArray:()=>[],contains:()=>!1,add:()=>{},remove:()=>{}};function R(e){const t=u(e);if(!t)return B;const n={toArray:()=>[...t.classList],contains:()=>!1,add:()=>{},remove:()=>{}};return n.add=e=>t.classList.add(e),n.remove=e=>t.classList.remove(e),n.contains=e=>t.classList.contains(e),n}function k(e){const t=M(e&&u(e));return t&&t.defaultView}function I(e,t){let n={};if(a){const o=e&&u(e);if(o){const s=k(e);n=s?s.getComputedStyle(o,t):{}}}return n}const W=new WeakMap;function j(e,t=!1){var n;if(!a)return 16;const o=e||(null===(n=M(e))||void 0===n?void 0:n.documentElement),s=W.get(o);if(!t&&s)return s;const i=parseInt(I(o).getPropertyValue("font-size"));return W.set(o,i),i}function q(e){const t=[];if(!a)return t;const n=e&&u(e);if(n){let e=n;for(;(e=e.parentNode)&&e&&1===e.nodeType&&"BODY"!==e.tagName;){const n=I(e),o=n.getPropertyValue("-webkit-transform")||n.getPropertyValue("-moz-transform")||n.getPropertyValue("-ms-transform")||n.getPropertyValue("-o-transform")||n.getPropertyValue("transform")||"none",s="none"===o||"matrix(1, 0, 0, 1, 0, 0)"===o;"static"===n.position&&s||t.push(e)}t.push(M(n).body)}return t}function H(e){const t=[];if(!a)return t;const n=e&&u(e);if(n){const e=(I(n)||{}).position;if("fixed"===e)return[n.ownerDocument];let s=n;for(;s&&1===s.nodeType&&(s=s.parentNode);){let n;try{n=I(s)}catch(o){}if(null==n)return t.push(s),t;const i=n,r=i.overflow,u=i.overflowX,c=i.overflowY;/(auto|scroll|overlay)/.test(r+c+u)&&("absolute"!==e||["relative","absolute","fixed"].indexOf(n.position)>=0)&&t.push(s)}const i=n.ownerDocument;i&&(t.push(i.body),i!==document&&t.push(i.defaultView))}return t}function U(e,t){const n=t.currentTarget,o=t.relatedTarget;o&&(o===n||E(n,o))||e(t)}function X(e){const t=e&&u(e);return!!t&&N()===t}function Y(e,t=!0){const n=e&&u(e);if(n===window||n===document||n===document.body)return!0;const o=n.parentNode;if(3===n.nodeType)return Y(o,t);const s=n?I(n):{};if("none"===s.display)return!1;if("hidden"===s.visibility||"0"===s.opacity)return!1;if("hidden"===s.overflow&&"absolute"===s.position&&"auto"!==s.clip){const e=s.clip.substring(5).slice(0,-1).split(", ");let t=!0;if(e.forEach((e=>{"0px"!==e&&(t=!1)})),t)return!1}return!t||!o||Y(o)}function z(e,t){const n=u(t)||document;if(a){const t=k(n);return t&&t.matchMedia(e)}return null}const K={children:o.func,render:o.func};class $ extends t.Component{constructor(...e){super(...e),this._focusListener=null,this._blurListener=null,this._inputModeListener=null,this.state={focused:!1,focusable:void 0},this.handleInputModeChange=()=>{this.forceUpdate()},this.handleFocus=()=>{this.removeFocusListener(),this.setState({focused:!0})},this.handleBlur=()=>{this.removeBlurListener(),this.setState({focused:!1})},this.ref=null,this.attachRef=e=>{this.ref=e}}componentDidMount(){const e=this.focusable,t=this.focused;this.addFocusableListeners(t,e),this._inputModeListener=L({onInputModeChange:this.handleInputModeChange}),this.setState({focusable:e,focused:t})}getSnapshotBeforeUpdate(e){const t=this.props,n=t.render,o=t.children;return e.children===o&&e.render===n||this.removeFocusableListeners(),null}componentDidUpdate(){const e=this.focusable;!e&&this.state.focusable?(this.removeFocusableListeners(),this.setState({focusable:void 0,focused:!1})):e!==this.state.focusable?(this.removeFocusableListeners(),this.state.focused&&e.focus(),this.addFocusableListeners(this.state.focused,e),this.setState({focusable:e})):this.addFocusableListeners(this.state.focused,e)}componentWillUnmount(){this._inputModeListener&&(this._inputModeListener.remove(),this._inputModeListener=null),this.removeFocusableListeners()}addFocusableListeners(e,t){t&&(e&&!this._blurListener?this._blurListener=c(t,"blur",this.handleBlur,!0):this._focusListener||(this._focusListener=c(t,"focus",this.handleFocus,!0)))}removeFocusableListeners(){this.removeFocusListener(),this.removeBlurListener()}removeFocusListener(){this._focusListener&&(this._focusListener.remove(),this._focusListener=null)}removeBlurListener(){this._blurListener&&(this._blurListener.remove(),this._blurListener=null)}get focused(){return x(this)}get focusable(){const e=C(this,(()=>!0),!0)||[],t=e&&e.length||0;n(1===t,`[Focusable] Exactly one focusable child is required (${t} found).`);const o=!!e&&e[0];return o&&"function"==typeof o.focus?o:void 0}get focusVisible(){const e=this.state,t=e.focusable,n=e.focused;return this.isFocusVisible(n,t)}focus(){const e=this.focusable;e&&e.focus()}isFocusVisible(e,t){if(!t||!e)return!1;if(this._inputModeListener&&this._inputModeListener.isKeyboardMode())return!0;const n=t.tagName,o=t.type,s=t.isContentEditable;return!("INPUT"!=n||!$.inputTypes[o])||("TEXTAREA"==n||!!s)}render(){const e=this.props,n=e.children,o=e.render,i=void 0===o?n:o,r=this.state,u=r.focusable,c=r.focused;if("function"==typeof i){const e=i({focused:c,focusable:u,focusVisible:this.isFocusVisible(c,u),attachRef:this.attachRef});return t.cloneElement(e,{ref:e.ref?s(e.ref,this.attachRef):this.attachRef})}return null}}$.displayName="Focusable",$.propTypes=K,$.allowedProps=["children","render"],$.defaultProps={children:null},$.inputTypes={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};export{$ as F,I as a,S as b,a as c,x as d,N as e,u as f,j as g,C as h,X as i,k as j,c as k,E as l,H as m,T as n,M as o,q as p,V as q,_ as r,U as s,R as t,Y as u,z as v};
